#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Sun Aug 25 13:24:04 2024

@author: hpc
"""

import os
import subprocess
import pandas as pd
import matplotlib.pyplot as plt

# Directory containing your Python files
directory = '/home/hpc/Desktop/B-M detection and prediction/cnn+lstm+MHA for random classes'

# CSV file to save accuracies
csv_file = '/home/hpc/Desktop/accuracies.csv'

# Initialize the CSV file with headers
if not os.path.isfile(csv_file):
    with open(csv_file, 'w') as f:
        f.write('File,Accuracy\n')

# Iterate over all Python files in the directory
for filename in os.listdir(directory):
    if filename.endswith('.py'):
        filepath = os.path.join(directory, filename)
        
        # Run the Python file
        try:
            subprocess.run(['python3', filepath], check=True)
        except subprocess.CalledProcessError as e:
            print(f"Error executing {filename}: {e}")
        
# Load the accuracies from the CSV file
accuracies_df = pd.read_csv(csv_file)

# Plot the accuracies
plt.figure(figsize=(10, 6))
plt.barh(accuracies_df['File'], accuracies_df['Accuracy'], color='skyblue')
plt.xlabel('Accuracy')
plt.ylabel('Python Files')
plt.title('Model Accuracies from Different Python Files')
plt.show()
